import{Q as h,a as w}from"./QBreadcrumbs.dfc1bd0b.js";import{aN as x,aO as q,U as k,r as B,j as f,k as r,W as p,p as o,Q as S,aP as $,a3 as C,t as s,n as a,m as c,aQ as g,F as Q,X as l,Y as D,aR as N,aS as V,aT as z,z as A,aU as b,aV as E,x as J,aW as L}from"./index.26cfbce9.js";import{Q as R}from"./QChip.c2651943.js";const F={id:"find_job",class:"container q-mx-auto"},I={class:"row q-pb-md"},P={class:"row q-col-gutter-md"},T=["href"],U={class:"left"},W=["src"],O={class:"right"},X={class:"text-overline text-orange-9"},Y={class:"text-h5 q-mt-sm q-mb-xs title"},j={class:"q-pb-sm"},G={class:"text-overline text-orange-9"},H={class:"description text-caption text-grey"},K={key:0,class:"row q-col-gutter-md"},ae={__name:"SearchJobs",setup(M){const n=x(),d=q();k();const u=B(!1),i=f([]),_=f({title:d.query.title,city:d.query.city});return(async()=>{n.loading.show({delay:400});try{let t="/jobs/search?";for(const e in _)t+=e+"="+(_[e]||"")+"&";t.slice(0,-1),console.log(t);const{data:m}=await $.get(t);i.push(...m.result),console.log(i),i.map(e=>(e.date_from=new Date(e.date_from).toLocaleDateString(),e.date_to=new Date(e.date_to).toLocaleDateString(),e.description=e.description.replace(/<(?:.|\s)*?>/g,""),e)),i.length===0&&(u.value=!0),n.loading.hide()}catch(t){console.log(t),C.fire({icon:"error",title:"\u5931\u6557",text:t.isAxiosError&&t.response.data?t.response.data.message:"\u767C\u751F\u932F\u8AA4"})}})(),(t,m)=>(r(),p(S,null,{default:o(()=>[s("div",F,[s("div",I,[a(w,{class:"col-12"},{default:o(()=>[a(h,{exact:"",label:t.$t("home"),to:"/"},null,8,["label"]),a(h,{exact:"",label:t.$t("find_jobs"),to:"/jobs"},null,8,["label"])]),_:1})]),s("div",P,[(r(!0),c(Q,null,g(i,e=>(r(),c("div",{key:e._id,class:"col-12 col-md-6 col-lg-4"},[a(L,{class:"full-height",flat:"",bordered:""},{default:o(()=>[s("a",{href:"#/jobs/"+e._id},[a(N,{src:e.photos[0],ratio:4/3},null,8,["src"])],8,T),a(V,null,{default:o(()=>[s("div",U,[a(z,{size:"2rem"},{default:o(()=>[s("img",{src:e.host.avatar},null,8,W)]),_:2},1024)]),s("div",O,[s("div",X,[a(A,{name:"pin_drop",size:"1.1rem"}),b(" "+l(e.city+" "+e.district),1)]),s("div",Y,l(e.title),1)]),s("div",j,[s("div",G,l(t.$t("job_welfare")),1),(r(!0),c(Q,null,g(e.welfare,(y,v)=>(r(),p(R,{key:v,size:".6rem"},{default:o(()=>[b(l(t.$t(y)),1)]),_:2},1024))),128))]),s("div",H,l(e.description),1)]),_:2},1024),a(E,null,{default:o(()=>[a(J,{class:"full-width",flat:"",color:"primary",label:t.$t("more"),to:"/jobs/"+e._id},null,8,["label","to"])]),_:2},1024)]),_:2},1024)]))),128))]),u.value?(r(),c("div",K,[s("h4",null,l(t.$t("no_results_label")),1)])):D("",!0)])]),_:1}))}};export{ae as default};
