import{n as W,D as B,x as ee,y as te,X as N,Y as le,b1 as se,r as g,a as V,u as ae,s as oe,o as r,d as u,f as l,t as a,e as o,aM as T,a0 as p,Z as b,w as s,_ as i,av as re,aO as L,a4 as k,F as A,aP as M,aS as $,aQ as Q,i as f,k as R,j as ne,aR as c,aU as O,Q as ie,aT as de,E as ue,g as ce,a2 as _e}from"./index.c53e1e06.js";import{Q as F,a as h,b as P,c as he,d as z}from"./QTable.ecc9ab69.js";import"./QSelect.827642bc.js";import"./QChip.8a9934e9.js";var K=W({name:"QTr",props:{props:Object,noHover:Boolean},setup(v,{slots:d}){const j=B(()=>"q-tr"+(v.props===void 0||v.props.header===!0?"":" "+v.props.__trClass)+(v.noHover===!0?" q-tr--no-hover":""));return()=>ee("tr",{class:j.value},te(d.default))}});const me={class:"q-pa-md"},be={class:"q-mx-auto",style:{"max-width":"1200px"}},pe={class:"text-center"},fe=["href"],we=["href"],ye=["href"],ve={key:0,class:"q-mb-none"},ge={key:1,class:"q-mb-none text-teal"},ke={key:2,class:"q-mb-none"},$e={class:"text-red"},je={key:3,class:"q-mb-none text-grey"},qe={key:4,class:"q-mb-none text-grey"},xe={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},Ce=["href"],Qe=["href"],Se={class:"text-h6 text-primary"},De=["href"],Ve={class:"text-h6 text-primary"},Te={class:"text-h6 text-primary"},Le={key:0,class:"q-mb-none"},Ae={key:1,class:"q-mb-none text-teal"},Me={key:2,class:"q-mb-none"},Oe={class:"text-red"},Be={key:3,class:"q-mb-none text-grey"},He={key:4,class:"q-mb-none text-grey"},Ee={class:"text-h6 text-primary"},Ie={class:"full-width row flex-center text-accent q-gutter-sm"},Ue=["href"],Ne=["href"],Re={key:0,class:"q-mb-none"},Fe={key:1,class:"q-mb-none text-teal"},Pe={key:2,class:"q-mb-none"},ze={class:"text-red"},Ke={key:3,class:"q-mb-none text-grey"},Xe={key:4,class:"q-mb-none text-grey"},Ye={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},Ze=["href"],Ge=["href"],Je={class:"text-h6 text-primary"},We={class:"text-h6 text-primary"},et={class:"text-h6 text-primary"},tt={class:"text-h6 text-primary"},lt={key:0,class:"q-mb-none"},st={key:1,class:"q-mb-none text-teal"},at={key:2,class:"q-mb-none"},ot={class:"text-red"},rt={key:3,class:"q-mb-none text-grey"},nt={key:4,class:"q-mb-none text-grey"},it={class:"text-h6"},dt={class:"text-left"},ut={class:"text-left"},ct={class:"text-left"},_t={class:"text-left"},ht={class:"text-left"},mt={class:"text-left"},bt={style:{"white-space":"normal"}},pt=["innerHTML"],ft={class:"text-left"},Ct={__name:"ApplicationStatus",setup(v){N({useScope:"global"});const{t:d}=N(),j=le(),w=se(),q=g(""),x=g(!1),S=g(!1),D=g(!0),H=g(0),m=V({helper:"",answer:""}),C=V([]),y=V({review:""}),X=ae(),{isLogin:wt,isAdmin:yt,isHost:Y,isHelper:Z,avatar:vt,lang:gt}=oe(X),G=B(()=>[{name:"photos",label:"",align:"center",field:t=>t.job.photos[0]},{name:"title",required:!0,label:d("job_title"),align:"center",style:"width: 40px",field:t=>t.job.title,sortable:!0},{name:"host",required:!0,label:d("host_name"),align:"center",field:t=>t.host.name,sortable:!0},{name:"job_time",align:"center",label:d("job_time"),field:t=>t.job.date_from+"~"+t.job.date_to,sortOrder:"da",sortable:!0},{name:"status",align:"center",label:d("application_status"),field:t=>t.review},{name:"cancel",align:"center",label:d("cancel")+d("apply")}]),J=B(()=>[{name:"photos",label:"",align:"center",field:t=>{var n;return(n=t.job)==null?void 0:n.photos[0]}},{name:"title",required:!0,label:d("job_title"),align:"center",field:t=>t.job.title,sortable:!0},{name:"helper",required:!0,label:d("name"),align:"center",field:t=>t.helper.name,sortable:!0},{name:"job_time",align:"center",label:d("job_time"),field:t=>t.job.date_from+"~"+t.job.date_to},{name:"apply_time",align:"center",label:d("apply_time"),field:t=>t.applied_time,sortable:!0},{name:"status",align:"center",label:d("application_status"),field:t=>t.review,sortable:!0},{name:"detail",align:"center",label:d("helper_info"),field:t=>t.review},{name:"review",align:"center",label:d("review")}]);(async()=>{x.value=!0;try{const{data:t}=await L.get("/orders/my_orders");console.log(t),C.push(...t.result),C.map(n=>(n.job.date_from=new Date(n.job.date_from).toLocaleDateString(),n.job.date_to=new Date(n.job.date_to).toLocaleDateString(),n.applied_time=new Date(n.applied_time).toLocaleDateString(),n.helper.birth=new Date(n.helper.birth).toLocaleDateString(),n))}catch(t){console.log(t),k.fire({icon:"error",title:"\u5931\u6557",text:t.isAxiosError&&t.response.data?t.response.data.message:"\u767C\u751F\u932F\u8AA4!"})}x.value=!1})();const E=async(t,n)=>{S.value=!0,m.helper=t,m.answer=n},I=async t=>{w.dialog({title:d("review_application"),style:"color: #545454; text-align: center;",ok:{label:d("comfirm"),push:!1,color:"primary",padding:"sm md"},cancel:{label:d("no"),color:"dark",flat:!0,padding:"sm md"},persistent:!0,options:{type:"radio",model:2,items:[{label:d("status_2"),value:2,color:"positive"},{label:d("status_3"),value:3,color:"negative"}]}}).onOk(n=>{try{y._id=t,y.review=n,L.patch("/orders/host",y),k.fire({icon:"success",title:"\u5BE9\u6838\u6210\u529F",text:"\u5BE9\u6838\u6210\u529F"}),j.go(0)}catch(e){console.log(e),k.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError&&e.response.data?e.response.data.message:"\u767C\u751F\u932F\u8AA4"})}})},U=t=>{w.dialog({title:d("are_you_sure"),html:!0,style:"color: #545454; text-align: center;",ok:{label:d("comfirm"),push:!1,color:"primary",padding:"sm md"},cancel:{label:d("no"),push:!0,color:"dark",flat:!0,padding:"sm md"},persistent:!0}).onOk(()=>{try{y._id=t,y.review=4,L.patch("/orders",y),k.fire({icon:"success",title:"\u53D6\u6D88\u6210\u529F",text:"\u53D6\u6D88\u5831\u540D"}),j.go(0)}catch(n){console.log(n),k.fire({icon:"error",title:"\u5931\u6557",text:n.isAxiosError&&n.response.data?n.response.data.message:"\u767C\u751F\u932F\u8AA4"})}})};return(t,n)=>(r(),u("div",me,[l("div",be,[l("h3",pe,a(t.$t("application_status")),1),o(T,{class:"q-mb-lg"}),p(Z)?(r(),b(F,{key:0,id:"helper_table",rows:C,columns:p(G),"row-key":"name",loading:x.value,grid:p(w).screen.lt.lg,"hide-bottom":p(w).screen.lt.lg,filter:q.value,"no-data-label":t.$t("no_data_label"),"no-results-label":t.$t("no_results_label"),"column-sort-order":t.da},{header:s(e=>[o(K,{props:e},{default:s(()=>[(r(!0),u(A,null,M(e.cols,_=>(r(),b(z,{key:_.name,props:e,class:"text-primary"},{default:s(()=>[$(a(_.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"body-cell":s(e=>[o(h,{props:e},{default:s(()=>[$(a(e.value),1)]),_:2},1032,["props"])]),"body-cell-photos":s(e=>[o(h,{props:e},{default:s(()=>[l("div",null,[l("a",{href:"#/jobs/"+e.row.job._id},[o(Q,{src:e.value,"spinner-color":"white",ratio:4/3,style:{"min-width":"150px"}},null,8,["src"])],8,fe)])]),_:2},1032,["props"])]),"body-cell-title":s(e=>[o(h,{props:e,"auto-width":!1},{default:s(()=>[l("div",null,[l("a",{href:"#/jobs/"+e.row.job._id},a(e.value),9,we)])]),_:2},1032,["props"])]),"body-cell-host":s(e=>[o(h,{props:e},{default:s(()=>[l("a",{href:"#/host/"+e.row.job.host},a(e.value),9,ye)]),_:2},1032,["props"])]),"body-cell-status":s(e=>[o(h,{props:e},{default:s(()=>[e.value===1?(r(),u("p",ve,a(t.$t("status_1")),1)):i("",!0),e.value===2?(r(),u("p",ge,a(t.$t("status_2")),1)):i("",!0),e.value===3?(r(),u("p",ke,[l("i",$e,a(t.$t("status_3")),1)])):i("",!0),e.value===4?(r(),u("p",je,a(t.$t("status_4")),1)):i("",!0),e.value===5?(r(),u("p",qe,a(t.$t("status_5")),1)):i("",!0)]),_:2},1032,["props"])]),"body-cell-cancel":s(e=>[o(h,{props:e},{default:s(()=>[e.row.review===1?(r(),b(f,{key:0,round:"",flat:"",color:"primary",icon:"mdi-close-circle-outline",onClick:_=>U(e.row._id)},null,8,["onClick"])):i("",!0)]),_:2},1032,["props"])]),loading:s(()=>[o(P,{showing:"",color:"primary"})]),"top-right":s(()=>[o(ne,{borderless:"",dense:"",debounce:"300",modelValue:q.value,"onUpdate:modelValue":n[0]||(n[0]=e=>q.value=e),placeholder:t.$t("search")},{append:s(()=>[o(R,{name:"search"})]),_:1},8,["modelValue","placeholder"])]),item:s(e=>[l("div",xe,[o(O,null,{default:s(()=>[o(c,{class:"text-center"},{default:s(()=>[l("a",{href:"#/jobs/"+e.row.job._id},[o(Q,{src:e.row.job.photos[0],"spinner-color":"white",ratio:4/3,style:{"min-width":"150px"}},null,8,["src"])],8,Ce)]),_:2},1024),o(T,{inset:""}),o(c,{class:"q-pb-none"},{default:s(()=>[l("div",null,[l("a",{class:"text-h5",href:"#/jobs/"+e.row.job._id},a(e.row.job.title),9,Qe)])]),_:2},1024),o(c,{class:"q-pb-none"},{default:s(()=>[l("p",Se,a(t.$t("host_name")),1),l("div",null,[l("a",{href:"#/host/"+e.row.job.host},a(e.row.host.name),9,De)])]),_:2},1024),o(c,{class:"q-pb-none"},{default:s(()=>[l("p",Ve,a(t.$t("job_time")),1),l("div",null,a(e.row.job.date_from+"~"+e.row.job.date_to),1)]),_:2},1024),o(c,null,{default:s(()=>[l("p",Te,a(t.$t("application_status")),1),l("div",null,[e.row.review===1?(r(),u("p",Le,a(t.$t("status_1")),1)):i("",!0),e.row.review===2?(r(),u("p",Ae,a(t.$t("status_2")),1)):i("",!0),e.row.review===3?(r(),u("p",Me,[l("i",Oe,a(t.$t("status_3")),1)])):i("",!0),e.row.review===4?(r(),u("p",Be,a(t.$t("status_4")),1)):i("",!0),e.row.review===5?(r(),u("p",He,a(t.$t("status_5")),1)):i("",!0)])]),_:2},1024),e.row.review===1?(r(),b(c,{key:0},{default:s(()=>[l("p",Ee,a(t.$t("cancel")+t.$t("apply")),1),o(f,{class:"full-width",color:"primary",outline:"",icon:"mdi-close-circle-outline",onClick:_=>U(e.row._id)},null,8,["onClick"])]),_:2},1024)):i("",!0)]),_:2},1024)])]),"no-data":s(({message:e})=>[l("div",Ie,[o(R,{size:"2em",name:"sentiment_dissatisfied"}),l("span",null,a(e),1)])]),_:1},8,["rows","columns","loading","grid","hide-bottom","filter","no-data-label","no-results-label","column-sort-order"])):i("",!0),p(Y)?(r(),b(F,{key:1,id:"host_table",rows:C,columns:p(J),"row-key":"name",loading:x.value,"no-data-label":t.$t("no_data_label"),"no-results-label":t.$t("no_results_label"),grid:p(w).screen.lt.lg,"hide-bottom":p(w).screen.lt.lg,filter:q.value},{header:s(e=>[o(K,{props:e},{default:s(()=>[(r(!0),u(A,null,M(e.cols,_=>(r(),b(z,{key:_.name,props:e,class:"text-primary"},{default:s(()=>[$(a(_.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"body-cell":s(e=>[o(h,{props:e},{default:s(()=>[$(a(e.value),1)]),_:2},1032,["props"])]),"body-cell-photos":s(e=>[o(h,{props:e},{default:s(()=>[l("div",null,[l("a",{href:"#/jobs/"+e.row.job._id},[o(Q,{src:e.value,"spinner-color":"white",ratio:4/3,style:{"min-width":"150px"}},null,8,["src"])],8,Ue)])]),_:2},1032,["props"])]),"body-cell-title":s(e=>[o(h,{props:e},{default:s(()=>[l("div",null,[l("a",{href:"#/jobs/"+e.row.job._id},a(e.value),9,Ne)])]),_:2},1032,["props"])]),"body-cell-status":s(e=>[o(h,{props:e},{default:s(()=>[e.value===1?(r(),u("p",Re,a(t.$t("status_1")),1)):i("",!0),e.value===2?(r(),u("p",Fe,a(t.$t("status_2")),1)):i("",!0),e.value===3?(r(),u("p",Pe,[l("i",ze,a(t.$t("status_3")),1)])):i("",!0),e.value===4?(r(),u("p",Ke,a(t.$t("status_4")),1)):i("",!0),e.value===5?(r(),u("p",Xe,a(t.$t("status_5")),1)):i("",!0)]),_:2},1032,["props"])]),"body-cell-detail":s(e=>[o(h,{props:e},{default:s(()=>[o(f,{round:"",flat:"",color:"primary",icon:`mdi-account-supervisor
`,onClick:_=>E(e.row.helper,e.row.answer)},null,8,["onClick"])]),_:2},1032,["props"])]),"body-cell-review":s(e=>[o(h,{props:e},{default:s(()=>[e.row.review!==4?(r(),b(f,{key:0,round:"",flat:"",color:"primary",icon:"spellcheck",onClick:_=>I(e.row._id)},null,8,["onClick"])):i("",!0)]),_:2},1032,["props"])]),loading:s(()=>[o(P,{showing:"",color:"primary"})]),item:s(e=>[l("div",Ye,[o(O,null,{default:s(()=>[o(c,{class:"text-center"},{default:s(()=>[l("a",{href:"#/jobs/"+e.row.job._id},[o(Q,{src:e.row.job.photos[0],"spinner-color":"white",ratio:4/3,style:{"min-width":"150px"}},null,8,["src"])],8,Ze)]),_:2},1024),o(T,{inset:""}),o(c,{class:"q-pb-none"},{default:s(()=>[l("div",null,[l("a",{class:"text-h5",href:"#/jobs/"+e.row.job._id},a(e.row.job.title),9,Ge)])]),_:2},1024),o(c,{class:"q-pb-none"},{default:s(()=>[l("p",Je,a(t.$t("host_name")),1),$(" "+a(e.row.helper.name),1)]),_:2},1024),o(c,{class:"q-pb-none"},{default:s(()=>[l("p",We,a(t.$t("job_time")),1),l("div",null,a(e.row.job.date_from+"~"+e.row.job.date_to),1)]),_:2},1024),o(c,{class:"q-pb-none"},{default:s(()=>[l("p",et,a(t.$t("apply_time")),1),l("div",null,a(e.row.apply_time),1)]),_:2},1024),o(c,{class:"q-pb-none"},{default:s(()=>[l("p",tt,a(t.$t("application_status")),1),l("div",null,[e.row.review===1?(r(),u("p",lt,a(t.$t("status_1")),1)):i("",!0),e.row.review===2?(r(),u("p",st,a(t.$t("status_2")),1)):i("",!0),e.row.review===3?(r(),u("p",at,[l("i",ot,a(t.$t("status_3")),1)])):i("",!0),e.row.review===4?(r(),u("p",rt,a(t.$t("status_4")),1)):i("",!0),e.row.review===5?(r(),u("p",nt,a(t.$t("status_5")),1)):i("",!0)])]),_:2},1024),e.row.review===1?(r(),b(c,{key:0,class:"q-pb-none"},{default:s(()=>[o(f,{class:"full-width",outline:"",color:"primary",icon:"question_answer",label:t.$t("helper_info"),onClick:_=>E(e.row.helper,e.row.answer)},null,8,["label","onClick"])]),_:2},1024)):i("",!0),e.row.review===1?(r(),b(c,{key:1},{default:s(()=>[e.row.review!==4?(r(),b(f,{key:0,class:"full-width",outline:"",color:"primary",label:t.$t("review"),icon:"spellcheck",onClick:_=>I(e.row._id)},null,8,["label","onClick"])):i("",!0)]),_:2},1024)):i("",!0)]),_:2},1024)])]),_:1},8,["rows","columns","loading","no-data-label","no-results-label","grid","hide-bottom","filter"])):i("",!0),o(re,{modelValue:S.value,"onUpdate:modelValue":n[4]||(n[4]=e=>S.value=e)},{default:s(()=>[o(O,{class:"my-card"},{default:s(()=>[o(c,null,{default:s(()=>[o(ie,{height:"250px",padding:"",navigation:"",animated:"",modelValue:H.value,"onUpdate:modelValue":n[1]||(n[1]=e=>H.value=e),arrows:"",infinite:"",autoplay:D.value,"transition-prev":"slide-right","transition-next":"slide-left",onMouseenter:n[2]||(n[2]=e=>D.value=!1),onMouseleave:n[3]||(n[3]=e=>D.value=!0)},{default:s(()=>[(r(!0),u(A,null,M(m.helper.photos,(e,_)=>(r(),b(ce,{key:_,name:_,"img-src":e},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue","autoplay"])]),_:1}),o(c,null,{default:s(()=>[l("div",it,a(m.helper.name),1)]),_:1}),o(he,{class:"helper_info"},{default:s(()=>[l("tbody",null,[l("tr",null,[l("td",dt,a(t.$t("gender")),1),l("td",null,a(p(d)(m.helper.gender)),1)]),l("tr",null,[l("td",ut,a(t.$t("birth")),1),l("td",null,a(m.helper.birth),1)]),l("tr",null,[l("td",ct,a(t.$t("tel")),1),l("td",null,a(m.helper.tel),1)]),l("tr",null,[l("td",_t,a(t.$t("mobile")),1),l("td",null,a(m.helper.mobile),1)]),l("tr",null,[l("td",ht,a(t.$t("email")),1),l("td",null,a(m.helper.email),1)]),l("tr",null,[l("td",mt,a(t.$t("description")),1),l("td",bt,[l("span",{innerHTML:m.helper.description},null,8,pt)])]),l("tr",null,[l("td",ft,a(t.$t("answer")),1),l("td",null,a(m.answer),1)])])]),_:1}),o(de,{align:"right"},{default:s(()=>[ue(o(f,{flat:"",label:"OK",color:"primary"},null,512),[[_e]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]))}};export{Ct as default};
