import{Z as z,u as G,s as J,r as K,j as I,B as $,a0 as a,w as Q,k as u,a1 as h,p as f,Q as X,t as i,x as _,n as o,aL as Y,a3 as v,a5 as d,a2 as y,C as k,a6 as ee,I as te,y as C,m as q,aP as le,F as se,a7 as ie,a8 as oe,bf as ae,v as de}from"./index.78d98e1a.js";import{Q as w}from"./QSelect.4c8e19f6.js";import{Q as ne}from"./QPopupProxy.045044fc.js";import{Q as re}from"./QFile.54388674.js";import{Q as ue}from"./QForm.8b241629.js";import{d as c}from"./data-en.7b4ff248.js";import{v as ce}from"./index.f0f819c8.js";const me={class:"q-pa-xl q-mx-auto"},pe={class:"text-center"},fe={class:"q-mx-auto form_container"},ye={class:"row q-col-gutter-md"},he={class:"col-12"},ve={class:"col-12 col-md-6"},be={class:"col-12 col-md-6"},_e={class:"col-12 col-md-6"},Ve={class:"col-12 col-md-6"},ge={class:"row items-center justify-end"},$e={class:"col-12 col-md-6"},qe={class:"col-12 col-md-6"},xe={class:"col-12 col-md-6"},Ie={class:"col-12 col-md-6"},Qe={class:"col-12"},we={class:"col-12"},Ue={class:"editor"},ze={class:"row"},ke={class:"col-12"},Ce={key:0},Se={key:1},De={class:"q-pa-md flex row"},Ae={__name:"AdminPage",setup(Pe){const{locale:m}=z({useScope:"global"}),{t:n}=z(),U=G(),{name:S,gender:D,birth:P,tel:T,mobile:B,email:E,city:L,district:Z,address:W,zipcode:F,description:j,photos:A,role:N,isHost:V,isHelper:g,lang:Te}=J(U),x=K(!1),r=I({city:"",district:""}),t=I({name:S.value,avatar:"",gender:D.value,birth:P.value,tel:T.value,mobile:B.value,email:E.value,city:L.value,district:Z.value,address:W.value,zipcode:F.value,role:N.value,description:j.value,photo_1:"",photo_2:"",photo_3:"",photos:[]}),O=$(()=>[{label:n("male"),value:"male"},{label:n("female"),value:"female"},{label:n("rahter_not_say"),value:"rahter_not_say"}]);$(()=>[{label:n("role_host"),value:"role_host"},{label:n("role_helper"),value:"role_helper"}]);const p=I({email:[e=>!!e||n("required"),e=>ce.exports.isEmail(e)||"\u4FE1\u7BB1\u683C\u5F0F\u932F\u8AA4"],account:[e=>!!e||n("required"),e=>e.length>=4&&e.length<=20||"\u5E33\u865F\u9577\u5EA6\u70BA 4 \u5230 20 \u500B\u5B57",e=>/^[a-zA-Z0-9]+$/.test(e)||"\u5E33\u865F\u53EA\u80FD\u7531\u82F1\u6578\u5B57\u7D44\u6210"],password:[e=>!!e||n("required"),e=>e.length>=4&&e.length<=20||"\u5BC6\u78BC\u9577\u5EA6\u70BA 4 \u5230 20 \u500B\u5B57",e=>/^[a-zA-Z0-9]+$/.test(e)||"\u5BC6\u78BC\u53EA\u80FD\u7531\u82F1\u6578\u5B57\u7D44\u6210"],confirmPassword:[e=>!!e||"\u8ACB\u8F38\u5165\u78BA\u8A8D\u5BC6\u78BC",e=>e===t.password||"\u5BC6\u78BC\u4E0D\u4E00\u81F4"],name:[e=>!!e||n("required"),e=>e.length>=2&&e.length<=15||"\u540D\u7A31\u9577\u5EA6\u70BA 2 \u5230 15 \u500B\u5B57"],tel:[e=>e.length<=10||"\u542B\u5340\u78BC\u9577\u5EA6\u70BA 9 \u6216 10 \u500B\u5B57\uFF0Cex:02-1234-5678 \u6216 03-1234-567"],mobile:[e=>!!e||n("required"),e=>e.length===10||"\u8ACB\u8F38\u516510\u4F4D\u624B\u6A5F"],address:[e=>!!e||n("required"),e=>e.length>=5||"\u8ACB\u586B\u5BEB\u6B63\u78BA\u8A73\u7D30\u5730\u5740\u8CC7\u8A0A"],required:[e=>!!e||n("required")]}),H=$(()=>m.value==="zh-TW"?a.counties:c.counties),M=$(()=>{if(m.value==="zh-TW"&&t.city){const e=a.counties.findIndex(l=>l===t.city);return a.districts[e][0]}else if(m.value==="en-US"&&t.city){console.log(t.city);const e=c.counties.findIndex(l=>l===t.city);if(e===-1){const l=a.counties.findIndex(s=>s===t.city);return c.districts[l][0]}return c.districts[e][0]}else return null});Q(()=>m.value,()=>{if(m.value==="zh-TW"){const e=c.counties.findIndex(l=>l===t.city);if(e>-1){t.city=a.counties[e];const s=c.districts[e][0].findIndex(b=>b===t.district);t.district=a.districts[e][0][s]}}else{const e=a.counties.findIndex(l=>l===t.city);if(e>-1){t.city=c.counties[e];const s=a.districts[e][0].findIndex(b=>b===t.district);t.district=c.districts[e][0][s]}}}),Q(()=>t.city,()=>{if(t.district="",m.value==="zh-TW"){const e=a.counties.findIndex(l=>l===t.city);e>-1&&(r.city=e)}else{const e=c.counties.findIndex(l=>l===t.city);e>-1&&(r.city=e)}}),Q(()=>t.district,()=>{if(m.value==="zh-TW"){const e=a.districts[r.city][0].findIndex(l=>l===t.district);e>-1&&(r.district=e,t.zipcode=a.districts[r.city][1][e])}else{const e=c.districts[r.city][0].findIndex(l=>l===t.district);e>-1&&(r.district=e,t.zipcode=a.districts[r.city][1][e])}});const R=()=>{x.value=!0,console.log(t.photos),m.value==="en-US"&&(t.city=a.counties[r.city],t.district=a.districts[r.city][0][r.district]),U.editUserInfo(t),x.value=!1};return(e,l)=>(u(),h(X,null,{default:f(()=>[i("div",me,[i("h2",pe,_(e.$t("manage_profile")),1),o(Y,{inset:"",class:"q-mb-lg"}),i("div",fe,[o(ue,{autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false",onSubmit:ie(R,["prevent"])},{default:f(()=>[i("div",ye,[i("div",he,[i("h5",null,_(e.$t("info")),1)]),i("div",ve,[o(v,{outlined:"",modelValue:t.name,"onUpdate:modelValue":l[0]||(l[0]=s=>t.name=s),label:d(g)?e.$t("name")+"*":e.$t("host_name")+"*",rules:p.name},null,8,["modelValue","label","rules"])]),i("div",be,[o(v,{outlined:"",modelValue:t.email,"onUpdate:modelValue":l[1]||(l[1]=s=>t.email=s),label:e.$t("email")+"*",rules:p.email},null,8,["modelValue","label","rules"])]),i("div",_e,[d(g)?(u(),h(w,{key:0,outlined:"",modelValue:t.gender,"onUpdate:modelValue":l[2]||(l[2]=s=>t.gender=s),options:d(O),label:e.$t("gender")+"*","emit-value":"","display-value":e.$t(t.gender),"lazy-rules":"",rules:p.required},null,8,["modelValue","options","label","display-value","rules"])):y("",!0)]),i("div",Ve,[d(g)?(u(),h(v,{key:0,outlined:"",modelValue:t.birth,"onUpdate:modelValue":l[4]||(l[4]=s=>t.birth=s),rules:["date"],label:e.$t("birthday")},{append:f(()=>[o(k,{name:"event",class:"cursor-pointer"},{default:f(()=>[o(ne,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:f(()=>[o(ee,{modelValue:t.birth,"onUpdate:modelValue":l[3]||(l[3]=s=>t.birth=s)},{default:f(()=>[i("div",ge,[te(o(C,{label:"Close",color:"primary",flat:""},null,512),[[oe]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","label"])):y("",!0)]),i("div",$e,[o(v,{outlined:"",modelValue:t.tel,"onUpdate:modelValue":l[5]||(l[5]=s=>t.tel=s),label:e.$t("tel"),rules:p.tel},null,8,["modelValue","label","rules"])]),i("div",qe,[o(v,{outlined:"",modelValue:t.mobile,"onUpdate:modelValue":l[6]||(l[6]=s=>t.mobile=s),label:e.$t("mobile")+"*",rules:p.mobile},null,8,["modelValue","label","rules"])]),i("div",xe,[d(V)?(u(),h(w,{key:0,outlined:"",modelValue:t.city,"onUpdate:modelValue":l[7]||(l[7]=s=>t.city=s),options:d(H),label:e.$t("city")+"*","emit-value":"","lazy-rules":"",rules:p.required},null,8,["modelValue","options","label","rules"])):y("",!0)]),i("div",Ie,[d(V)?(u(),h(w,{key:0,outlined:"",modelValue:t.district,"onUpdate:modelValue":l[8]||(l[8]=s=>t.district=s),options:d(M),label:e.$t("district")+"*","emit-value":"",rules:p.required},null,8,["modelValue","options","label","rules"])):y("",!0)]),i("div",Qe,[d(V)?(u(),h(v,{key:0,outlined:"",type:"text",modelValue:t.address,"onUpdate:modelValue":l[9]||(l[9]=s=>t.address=s),label:e.$t("address")+"*","lazy-rules":"",rules:p.address},null,8,["modelValue","label","rules"])):y("",!0)]),i("div",we,[i("h5",null,_(e.$t("story_of_my_life")),1),i("div",Ue,[o(d(ae),{content:t.description,"onUpdate:content":l[10]||(l[10]=s=>t.description=s),contentType:"html",theme:"snow",toolbar:"minimal",class:"ql",placeholder:e.$t("tell_me_someting_about_you")},null,8,["content","placeholder"])])])]),i("div",ze,[i("div",ke,[d(g)?(u(),q("h5",Ce,_(e.$t("photos")),1)):y("",!0),d(V)?(u(),q("h5",Se,_(e.$t("photos_host")),1)):y("",!0),o(re,{color:"primary",accept:".jpg, image/*","max-files":3,filled:"",multiple:"",modelValue:t.photos,"onUpdate:modelValue":l[11]||(l[11]=s=>t.photos=s),label:e.$t("upload_file"),hint:e.$t("max_upload")},{prepend:f(()=>[o(k,{name:"cloud_upload"})]),_:1},8,["modelValue","label","hint"]),i("div",De,[(u(!0),q(se,null,le(d(A),(s,b)=>(u(),q("div",{class:"col-6 q-pa-xs",key:b},[o(de,{src:s,ratio:4/3,"spinner-color":"white"},null,8,["src"])]))),128))])])]),o(C,{class:"full-width q-mt-lg",color:"primary",label:e.$t("submit"),type:"submit",loading:x.value},null,8,["label","loading"])]),_:1},8,["onSubmit"])])])]),_:1}))}};export{Ae as default};
