import{Q as f,a as w}from"./QBreadcrumbs.7dece76b.js";import{aN as x,aO as q,U as k,r as B,j as p,k as r,W as g,p as l,Q as S,aP as $,a3 as C,t,n as o,m as n,aQ as Q,F as b,X as c,Y as D,aR as N,aS as V,aT as z,z as A,aU as y,aV as E,x as J,aW as L}from"./index.3a460cf9.js";import{Q as R}from"./QChip.21255316.js";const U={id:"find_job",class:"container q-mx-auto"},F={class:"row q-pb-md"},I={class:"row q-col-gutter-md"},P=["href"],T={class:"left"},W=["src"],O={class:"right"},X={class:"text-overline text-orange-9"},Y={class:"text-h5 q-mt-sm q-mb-xs title"},j={class:"q-pb-sm"},G={class:"text-overline text-orange-9"},H={class:"description text-caption text-grey"},K={key:0,class:"row q-col-gutter-md"},ae={__name:"SearchJobs",setup(M){const u=x(),_=q();k();const m=B(!1),i=p([]),h=p({title:_.query.title,city:_.query.city});return(async()=>{u.loading.show({delay:400});try{let e="/jobs/search?";for(const a in h)e+=a+"="+(h[a]||"")+"&";console.log(e);const d=e.slice(0,-1);console.log(d);const{data:s}=await $.get(d);i.push(...s.result),console.log(i),i.map(a=>(a.date_from=new Date(a.date_from).toLocaleDateString(),a.date_to=new Date(a.date_to).toLocaleDateString(),a.description=a.description.replace(/<(?:.|\s)*?>/g,""),a)),i.length===0&&(m.value=!0),u.loading.hide()}catch(e){console.log(e),C.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError&&e.response.data?e.response.data.message:"\u767C\u751F\u932F\u8AA4"})}})(),(e,d)=>(r(),g(S,null,{default:l(()=>[t("div",U,[t("div",F,[o(w,{class:"col-12"},{default:l(()=>[o(f,{exact:"",label:e.$t("home"),to:"/"},null,8,["label"]),o(f,{exact:"",label:e.$t("find_jobs"),to:"/jobs"},null,8,["label"])]),_:1})]),t("div",I,[(r(!0),n(b,null,Q(i,s=>(r(),n("div",{key:s._id,class:"col-12 col-md-6 col-lg-4"},[o(L,{class:"full-height",flat:"",bordered:""},{default:l(()=>[t("a",{href:"#/jobs/"+s._id},[o(N,{src:s.photos[0],ratio:4/3},null,8,["src"])],8,P),o(V,null,{default:l(()=>[t("div",T,[o(z,{size:"2rem"},{default:l(()=>[t("img",{src:s.host.avatar},null,8,W)]),_:2},1024)]),t("div",O,[t("div",X,[o(A,{name:"pin_drop",size:"1.1rem"}),y(" "+c(s.city+" "+s.district),1)]),t("div",Y,c(s.title),1)]),t("div",j,[t("div",G,c(e.$t("job_welfare")),1),(r(!0),n(b,null,Q(s.welfare,(a,v)=>(r(),g(R,{key:v,size:".6rem"},{default:l(()=>[y(c(e.$t(a)),1)]),_:2},1024))),128))]),t("div",H,c(s.description),1)]),_:2},1024),o(E,null,{default:l(()=>[o(J,{class:"full-width",flat:"",color:"primary",label:e.$t("more"),to:"/jobs/"+s._id},null,8,["label","to"])]),_:2},1024)]),_:2},1024)]))),128))]),m.value?(r(),n("div",K,[t("h4",null,c(e.$t("no_results_label")),1)])):D("",!0)])]),_:1}))}};export{ae as default};
