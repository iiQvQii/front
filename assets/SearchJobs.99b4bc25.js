import{aM as z,Z as U,aN as I,$ as N,r as g,j as p,B as P,a0 as A,w as E,k as d,a1 as w,p as r,Q as L,aO as R,aa as T,t as e,n as a,_ as F,v as Q,x as n,a5 as J,C as x,a6 as O,I as Z,y as f,a3 as V,m,aP as q,F as $,a2 as K,a8 as M,aQ as W,aR as G,aS as k,aB as H,aT as X,aU as Y}from"./index.c5f541b2.js";import{a as C,Q as ee}from"./QBreadcrumbs.17bc9eb7.js";import{Q as te}from"./QSelect.b694761a.js";import{Q as se}from"./QPopupProxy.63f06c9b.js";import{d as ae}from"./data-en.7b4ff248.js";const oe={id:"find_job"},le={class:"main_banner"},re=e("div",{class:"bg"},null,-1),ie={class:"text-dark text-center"},ce={class:"container q-mx-auto"},ne={class:"row q-py-lg"},de={class:"container q-mx-auto"},ue={class:"row"},_e={class:"col"},me={id:"job_search_area"},he={class:"row flex-center q-col-gutter-md"},pe={class:"col-3"},fe={class:"col-3"},ve={class:"row items-center justify-end"},ye={class:"col-5"},be={class:"col-1"},ge={class:"container job_card_container q-mx-auto"},we={class:"row q-col-gutter-md"},Qe=["href"],xe={class:"row"},Ve={class:"col-2 flex align-center"},qe=["src"],$e={class:"col-10"},ke={class:"text-overline text-orange-9"},Ce={class:"text-h5 q-mt-sm q-mb-xs title"},Be={class:"row"},Se={class:"col-12 q-py-sm"},De={class:"text-overline text-orange-9"},je={class:"row"},ze={class:"col-12 description text-caption text-grey"},Ue={key:0,class:"row flex-center"},Ie={class:"col-12"},Ne={class:"text-center text-accent"},Fe={__name:"SearchJobs",setup(Pe){const v=z(),{locale:B}=U({useScope:"global"}),_=I(),S=N(),y=g(!1),u=p([]),h=g(""),c=p({date:{}}),i=p({title:_.query.title,city:_.query.city,date_from:_.query.date_from,date_to:_.query.date_to}),D=P(()=>B.value==="zh-TW"?A.counties:ae.counties);E(()=>c.date,()=>{h.value=c.date.from+"~"+c.date.to,i.date_from=c.date.from.replace(/\//g,"-"),i.date_to=c.date.to.replace(/\//g,"-")});const b=async()=>{v.loading.show({delay:400});try{let s="/jobs/search?";for(const l in i)s+=l+"="+(i[l]||"")+"&";const o=s.slice(0,-1);console.log(o);const{data:t}=await R.get(o);u.slice(1,1),u.push(...t.result),u.map(l=>(l.date_from=new Date(l.date_from).toLocaleDateString(),l.date_to=new Date(l.date_to).toLocaleDateString(),l.description=l.description.replace(/<(?:.|\s)*?>/g,""),l)),u.length===0&&(y.value=!0),S.push(o),v.loading.hide()}catch(s){console.log(s),T.fire({icon:"error",title:"\u5931\u6557",text:s.isAxiosError&&s.response.data?s.response.data.message:"\u767C\u751F\u932F\u8AA4"})}};return b(),(s,o)=>(d(),w(L,{key:s.componentKey},{default:r(()=>[e("div",oe,[e("div",le,[a(Q,{class:"main_banner",src:F,width:"100%"}),re,e("h2",ie,n(s.$t("find_jobs")),1)]),e("div",ce,[e("div",ne,[a(ee,{class:"col-12"},{default:r(()=>[a(C,{exact:"",label:s.$t("home"),to:"/"},null,8,["label"]),a(C,{exact:"",label:s.$t("find_jobs"),to:"/jobs/search"},null,8,["label"])]),_:1})])]),e("div",de,[e("div",ue,[e("div",_e,[e("div",me,[e("div",he,[e("div",pe,[a(te,{outlined:"",modelValue:i.city,"onUpdate:modelValue":o[0]||(o[0]=t=>i.city=t),options:J(D),label:s.$t("city"),"emit-value":"","lazy-rules":"","bg-color":"white"},null,8,["modelValue","options","label"])]),e("div",fe,[a(V,{outlined:"",modelValue:h.value,"onUpdate:modelValue":o[2]||(o[2]=t=>h.value=t),label:s.$t("job_time"),"bg-color":"white"},{append:r(()=>[a(x,{name:"event",class:"cursor-pointer"},{default:r(()=>[a(se,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:r(()=>[a(O,{modelValue:c.date,"onUpdate:modelValue":o[1]||(o[1]=t=>c.date=t),range:""},{default:r(()=>[e("div",ve,[Z(a(f,{label:"Close",color:"primary",flat:""},null,512),[[M]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","label"])]),e("div",ye,[a(V,{modelValue:i.title,"onUpdate:modelValue":o[3]||(o[3]=t=>i.title=t),outlined:"",type:"search",maxlength:"20","bg-color":"white",label:s.$t("search"),"input-style":{color:"#112B3C",fontSize:"1.1rem"}},null,8,["modelValue","label","input-style"])]),e("div",be,[a(f,{id:"search_btn",class:"full-width",color:"primary",icon:"search",onClick:b})])])])])])]),e("div",ge,[e("div",we,[(d(!0),m($,null,q(u,t=>(d(),m("div",{key:t._id,class:"col-12 col-md-6 col-lg-4"},[a(Y,{class:"job_card",flat:"",bordered:""},{default:r(()=>[e("a",{href:"#/jobs/"+t._id},[a(Q,{src:t.photos[0],ratio:4/3},null,8,["src"])],8,Qe),a(W,null,{default:r(()=>[e("div",xe,[e("div",Ve,[a(G,{class:"q-mt-xs",size:"2.5rem"},{default:r(()=>[e("img",{src:t.host.avatar},null,8,qe)]),_:2},1024)]),e("div",$e,[e("div",ke,[a(x,{name:"pin_drop",size:"1.1rem"}),k(" "+n(t.city+" "+t.district),1)]),e("div",Ce,n(t.title),1)])]),e("div",Be,[e("div",Se,[e("div",De,n(s.$t("job_welfare")),1),(d(!0),m($,null,q(t.welfare,(l,j)=>(d(),w(H,{key:j,size:".6rem"},{default:r(()=>[k(n(s.$t(l)),1)]),_:2},1024))),128))])]),e("div",je,[e("div",ze,n(t.description),1)])]),_:2},1024),a(X,null,{default:r(()=>[a(f,{class:"full-width",flat:"",color:"primary",label:s.$t("more"),to:"/jobs/"+t._id},null,8,["label","to"])]),_:2},1024)]),_:2},1024)]))),128))])]),y.value?(d(),m("div",Ue,[e("div",Ie,[e("h4",Ne,[e("i",null,n(s.$t("no_results_label")),1)])])])):K("",!0)])]),_:1}))}};export{Fe as default};
