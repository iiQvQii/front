import{Q as g,a as S}from"./QBreadcrumbs.a0e263b7.js";import{aI as B,T as z,aJ as U,U as A,r as b,j as m,y as I,V as N,k as d,W as w,p as r,Q as P,aK as j,a4 as E,t as e,n as o,Z as Q,x as h,$ as J,z as V,a0 as L,A as R,m as _,aL as q,F as x,X as n,Y as T,a2 as F,aM as O,aN as W,aO as Z,aP as k,aQ as K,aR as M}from"./index.3e86a9d0.js";import{Q as X}from"./QSelect.499c0e23.js";import{Q as Y}from"./QPopupProxy.1a2d3521.js";import{Q as G}from"./QChip.d5ecf9c3.js";import{d as H}from"./data-en.7b4ff248.js";const ee={id:"find_job",class:"container q-mx-auto"},te={class:"row q-pb-md"},se={class:"row"},oe={class:"col"},ae={id:"job_search_area",class:"q-my-md"},le={class:"row"},re={class:"col"},ie={class:"row"},de={class:"col-6"},ne={class:"col-6"},ce={class:"row items-center justify-end"},ue={class:"q-my-xl",style:{"background-color":"#efefef",padding:"3rem"}},_e={class:"row q-gutter-xs"},me=["href"],he={class:"row"},pe={class:"col-2 flex align-center"},fe=["src"],ye={class:"col-10"},ve={class:"text-overline text-orange-9"},ge={class:"text-h5 q-mt-sm q-mb-xs title"},be={class:"row"},we={class:"col-12 q-py-sm"},Qe={class:"text-overline text-orange-9"},Ve={class:"row"},qe={class:"col-12 description text-caption text-grey"},xe={key:0,class:"row q-col-gutter-md"},Ae={__name:"SearchJobs",setup(ke){const p=B(),{locale:$}=z({useScope:"global"}),u=U();A();const f=b(!1),c=m([]),y=b(""),v=m({date:{}}),i=m({title:u.query.title,city:u.query.city,date_from:u.query.date_from,date_to:u.query.date_to}),C=I(()=>$.value==="zh-TW"?N.counties:H.counties);return(async()=>{p.loading.show({delay:400});try{let s="/jobs/search?";for(const a in i)s+=a+"="+(i[a]||"")+"&";console.log(s);const l=s.slice(0,-1);console.log(l);const{data:t}=await j.get(l);c.push(...t.result),console.log(c),c.map(a=>(a.date_from=new Date(a.date_from).toLocaleDateString(),a.date_to=new Date(a.date_to).toLocaleDateString(),a.description=a.description.replace(/<(?:.|\s)*?>/g,""),a)),c.length===0&&(f.value=!0),p.loading.hide()}catch(s){console.log(s),E.fire({icon:"error",title:"\u5931\u6557",text:s.isAxiosError&&s.response.data?s.response.data.message:"\u767C\u751F\u932F\u8AA4"})}})(),(s,l)=>(d(),w(P,null,{default:r(()=>[e("div",ee,[e("div",te,[o(S,{class:"col-12"},{default:r(()=>[o(g,{exact:"",label:s.$t("home"),to:"/"},null,8,["label"]),o(g,{exact:"",label:s.$t("find_jobs"),to:"/jobs"},null,8,["label"])]),_:1})]),e("div",se,[e("div",oe,[e("div",ae,[e("div",le,[e("div",re,[o(Q,{modelValue:i.keyword,"onUpdate:modelValue":l[0]||(l[0]=t=>i.keyword=t),outlined:"",type:"search",maxlength:"20","bg-color":"white","input-style":{color:"#112B3C",fontSize:"1.1rem"}},null,8,["modelValue","input-style"]),o(h,{id:"search_btn",color:"primary",label:s.$t("search"),icon:"search"},null,8,["label"])])]),e("div",ie,[e("div",de,[o(X,{outlined:"",modelValue:i.city,"onUpdate:modelValue":l[1]||(l[1]=t=>i.city=t),options:J(C),label:s.$t("city")+"*","emit-value":"","lazy-rules":"","bg-color":"white"},null,8,["modelValue","options","label"])]),e("div",ne,[o(Q,{outlined:"",modelValue:y.value,"onUpdate:modelValue":l[3]||(l[3]=t=>y.value=t),label:s.$t("job_time"),"bg-color":"white"},{append:r(()=>[o(V,{name:"event",class:"cursor-pointer"},{default:r(()=>[o(Y,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:r(()=>[o(L,{modelValue:v.date,"onUpdate:modelValue":l[2]||(l[2]=t=>v.date=t),range:""},{default:r(()=>[e("div",ce,[R(o(h,{label:"Close",color:"primary",flat:""},null,512),[[F]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","label"])])])])])]),e("div",ue,[e("div",_e,[(d(!0),_(x,null,q(c,t=>(d(),_("div",{key:t._id,class:"col-12 col-md-6 col-lg-4"},[o(M,{class:"job_card",flat:"",bordered:""},{default:r(()=>[e("a",{href:"#/jobs/"+t._id},[o(O,{src:t.photos[0],ratio:4/3},null,8,["src"])],8,me),o(W,null,{default:r(()=>[e("div",he,[e("div",pe,[o(Z,{class:"q-mt-xs",size:"2.5rem"},{default:r(()=>[e("img",{src:t.host.avatar},null,8,fe)]),_:2},1024)]),e("div",ye,[e("div",ve,[o(V,{name:"pin_drop",size:"1.1rem"}),k(" "+n(t.city+" "+t.district),1)]),e("div",ge,n(t.title),1)])]),e("div",be,[e("div",we,[e("div",Qe,n(s.$t("job_welfare")),1),(d(!0),_(x,null,q(t.welfare,(a,D)=>(d(),w(G,{key:D,size:".6rem"},{default:r(()=>[k(n(s.$t(a)),1)]),_:2},1024))),128))])]),e("div",Ve,[e("div",qe,n(t.description),1)])]),_:2},1024),o(K,null,{default:r(()=>[o(h,{class:"full-width",flat:"",color:"primary",label:s.$t("more"),to:"/jobs/"+t._id},null,8,["label","to"])]),_:2},1024)]),_:2},1024)]))),128))])]),f.value?(d(),_("div",xe,[e("h4",null,n(s.$t("no_results_label")),1)])):T("",!0)])]),_:1}))}};export{Ae as default};
