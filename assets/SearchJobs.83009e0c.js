import{aM as $,Z as S,aN as C,$ as D,r as g,j as m,B as N,a0 as z,w as A,k as l,a1 as v,p as r,Q as E,aO as V,aa as j,t as e,n as o,_ as I,v as y,x as c,m as u,aP as b,F as w,a2 as J,aQ as L,aR as R,C as T,aS as x,aB as F,aT as P,y as U,aU as Z}from"./index.7e440d76.js";import{a as Q,Q as K}from"./QBreadcrumbs.2d41eb54.js";import{d as M}from"./data-en.7b4ff248.js";const O={id:"find_job"},W={class:"main_banner"},G=e("div",{class:"bg"},null,-1),H={class:"text-dark text-center"},X={class:"container q-mx-auto"},Y={class:"row q-py-lg"},ee={class:"container job_card_container q-mx-auto"},te={class:"row q-col-gutter-md"},se=["href"],ae={class:"row"},oe={class:"col-2 flex align-center"},re=["src"],ce={class:"col-10"},le={class:"text-overline text-orange-9"},ne={class:"text-h5 q-mt-sm q-mb-xs title"},ie={class:"row"},de={class:"col-12 q-py-sm"},_e={class:"text-overline text-orange-9"},ue={class:"row"},he={class:"col-12 description text-caption text-grey"},me={key:0,class:"row flex-center"},fe={class:"col-12"},pe={class:"text-center text-accent"},xe={__name:"SearchJobs",setup(ge){const f=$(),{locale:q}=S({useScope:"global"}),i=C();D();const p=g(!1),d=m([]),k=g(""),n=m({date:{}}),_=m({title:i.query.title,city:i.query.city,date_from:i.query.date_from,date_to:i.query.date_to});return N(()=>q.value==="zh-TW"?z.counties:M.counties),A(()=>n.date,()=>{k.value=n.date.from+"~"+n.date.to,_.date_from=n.date.from.replace(/\//g,"-"),_.date_to=n.date.to.replace(/\//g,"-")}),(async()=>{f.loading.show({delay:400});try{let t="/jobs/search?";for(const a in _)t+=a+"="+(_[a]||"")+"&";const h=t.slice(0,-1);console.log(h);const{data:s}=await V.get(h);d.push(...s.result),d.map(a=>(a.date_from=new Date(a.date_from).toLocaleDateString(),a.date_to=new Date(a.date_to).toLocaleDateString(),a.description=a.description.replace(/<(?:.|\s)*?>/g,""),a)),d.length===0&&(p.value=!0),f.loading.hide()}catch(t){console.log(t),j.fire({icon:"error",title:"\u5931\u6557",text:t.isAxiosError&&t.response.data?t.response.data.message:"\u767C\u751F\u932F\u8AA4"})}})(),(t,h)=>(l(),v(E,{key:t.componentKey},{default:r(()=>[e("div",O,[e("div",W,[o(y,{class:"main_banner",src:I,width:"100%"}),G,e("h2",H,c(t.$t("find_jobs")),1)]),e("div",X,[e("div",Y,[o(K,{class:"col-12"},{default:r(()=>[o(Q,{exact:"",label:t.$t("home"),to:"/"},null,8,["label"]),o(Q,{exact:"",label:t.$t("find_jobs"),to:"/jobs/search"},null,8,["label"])]),_:1})])]),e("div",ee,[e("div",te,[(l(!0),u(w,null,b(d,s=>(l(),u("div",{key:s._id,class:"col-12 col-md-6 col-lg-4"},[o(Z,{class:"job_card",flat:"",bordered:""},{default:r(()=>[e("a",{href:"#/jobs/"+s._id},[o(y,{src:s.photos[0],ratio:4/3},null,8,["src"])],8,se),o(L,null,{default:r(()=>[e("div",ae,[e("div",oe,[o(R,{class:"q-mt-xs",size:"2.5rem"},{default:r(()=>[e("img",{src:s.host.avatar},null,8,re)]),_:2},1024)]),e("div",ce,[e("div",le,[o(T,{name:"pin_drop",size:"1.1rem"}),x(" "+c(s.city+" "+s.district),1)]),e("div",ne,c(s.title),1)])]),e("div",ie,[e("div",de,[e("div",_e,c(t.$t("job_welfare")),1),(l(!0),u(w,null,b(s.welfare,(a,B)=>(l(),v(F,{key:B,size:".6rem"},{default:r(()=>[x(c(t.$t(a)),1)]),_:2},1024))),128))])]),e("div",ue,[e("div",he,c(s.description),1)])]),_:2},1024),o(P,null,{default:r(()=>[o(U,{class:"full-width",flat:"",color:"primary",label:t.$t("more"),to:"/jobs/"+s._id},null,8,["label","to"])]),_:2},1024)]),_:2},1024)]))),128))])]),p.value?(l(),u("div",me,[e("div",fe,[e("h4",pe,[e("i",null,c(t.$t("no_results_label")),1)])])])):J("",!0)])]),_:1}))}};export{xe as default};
