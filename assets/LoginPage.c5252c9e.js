import{T as Q,u as q,r as n,j as p,y as m,k,W as S,p as f,Q as z,t as r,X as d,n as o,Z as g,_ as B,$ as y,x as _,a0 as U,aM as x}from"./index.3a460cf9.js";import{Q as F}from"./QBtnToggle.0b69f7cb.js";import{Q as Z}from"./QForm.39b906b7.js";const A={class:"flex flex-center column q-pt-xl"},I={class:"q-pa-md",style:{"min-width":"300px"}},M={class:"q-pb-lg"},N={class:"q-my-sm text-center"},D={__name:"LoginPage",setup(P){const{t:s}=Q(),b=q(),h=n(null),w=n(null),u=n(!1),c=n(!1),l=p({account:"",password:"",role:""}),V=m(()=>[{label:s("role_host"),value:"role_host"},{label:s("role_helper"),value:"role_helper"}]),i=p({account:[e=>!!e||s("required"),e=>e.length>=4&&e.length<=20||"\u5E33\u865F\u9577\u5EA6\u70BA 4 \u5230 20 \u500B\u5B57",e=>/^[a-zA-Z0-9]+$/.test(e)||"\u5E33\u865F\u53EA\u80FD\u7531\u82F1\u6578\u5B57\u7D44\u6210"],password:[e=>!!e||s("required"),e=>e.length>=4&&e.length<=20||"\u5BC6\u78BC\u9577\u5EA6\u70BA 4 \u5230 20 \u500B\u5B57",e=>/^[a-zA-Z0-9]+$/.test(e)||"\u5BC6\u78BC\u53EA\u80FD\u7531\u82F1\u6578\u5B57\u7D44\u6210"],role:[e=>!!e||s("required")]}),v=m(()=>c.value&&!l.role?{color:"red"}:{color:"black"}),$=()=>{if(!l.role){c.value=!0;return}u.value=!0,l.role==="role_host"?l.role=1:l.role==="role_host"?l.role=2:l.role=null,b.login(l),u.value=!1};return(e,t)=>(k(),S(z,null,{default:f(()=>[r("div",A,[r("h3",null,d(e.$t("login")),1),r("div",I,[o(Z,{ref_key:"loginForm",ref:h,autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false",onSubmit:U($,["prevent"])},{default:f(()=>[o(g,{outlined:"",modelValue:l.account,"onUpdate:modelValue":t[0]||(t[0]=a=>l.account=a),label:e.$t("account")+"*",rules:i.account},null,8,["modelValue","label","rules"]),o(g,{outlined:"",type:"password",modelValue:l.password,"onUpdate:modelValue":t[1]||(t[1]=a=>l.password=a),label:e.$t("password")+"*","lazy-rules":"",rules:i.password},null,8,["modelValue","label","rules"]),r("p",{style:B(y(v))},d(e.$t("login_as")+"*"),5),o(F,{modelValue:l.role,"onUpdate:modelValue":t[2]||(t[2]=a=>l.role=a),"toggle-color":"primary",options:y(V),spread:"",rules:i.role,ref_key:"role",ref:w,style:{"margin-bottom":"20px"}},null,8,["modelValue","options","rules"]),o(_,{class:"full-width",color:"primary",label:e.$t("login"),type:"submit",loading:u.value},null,8,["label","loading"])]),_:1},8,["onSubmit"]),o(x,{class:"q-my-lg"}),r("div",M,[r("p",N,d(e.$t("not_yet_registered")),1),o(_,{class:"full-width",label:e.$t("create_account"),color:"primary",outline:"","no-caps":"",to:"/register"},null,8,["label"])])])])]),_:1}))}};export{D as default};
