import{X as m,aN as g,r as u,a as w,D as y,o as j,d as x,f as o,t as s,e as a,aM as b,w as l,a0 as q,aO as v,a4 as Q,aS as S,aQ as h,i as f,aU as $,aR as c}from"./index.c53e1e06.js";import{Q as D,a as _,b as B}from"./QTable.ecc9ab69.js";import"./QSelect.827642bc.js";import"./QChip.8a9934e9.js";const N={class:"q-pa-md"},k={class:"q-mx-auto",style:{"max-width":"1200px"}},C={class:"text-center"},I={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},J=["href"],L={style:{height:"160px"}},M={class:"q-pb-md"},T=["href"],V={class:"q-pb-xs"},A={class:"text-h6 text-primary"},E={class:"q-pb-xs"},R={class:"text-h6 text-primary"},G={__name:"JobPage",setup(O){m({useScope:"global"});const{t:r}=m();g(),u("isShown");const n=u(!1),d=w([]),p=y(()=>[{name:"photos",label:"",align:"center",field:e=>e.photos[0]},{name:"title",required:!0,label:r("job_title"),align:"center",field:e=>e.title,format:e=>`${e}`,sortable:!0},{name:"job_time",align:"center",label:r("job_time"),field:e=>e.date_from+"~"+e.date_to,sortable:!0},{name:"place",align:"center",label:r("job_location"),field:e=>e.city+e.district},{name:"edit",align:"center",label:r("edit")}]);return(async()=>{n.value=!0;try{const{data:e}=await v.get("/jobs/my_job");d.push(...e.result),d.map(i=>(i.date_from=new Date(i.date_from).toLocaleDateString(),i.date_to=new Date(i.date_to).toLocaleDateString(),i))}catch(e){console.log(e),Q.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError&&e.response.data?e.response.data.message:"\u767C\u751F\u932F\u8AA4!"})}n.value=!1})(),(e,i)=>(j(),x("div",N,[o("div",k,[o("h3",C,s(e.$t("manage_jobs")),1),a(b,{class:"q-mb-lg"}),a(D,{id:"job_table",rows:d,columns:q(p),"row-key":"name",loading:n.value,grid:e.$q.screen.lt.lg,"hide-bottom":e.$q.screen.lt.lg,filter:e.filter,"no-data-label":e.$t("no_data_label"),"no-results-label":e.$t("no_results_label")},{"body-cell":l(t=>[a(_,{props:t},{default:l(()=>[S(s(t.value),1)]),_:2},1032,["props"])]),"body-cell-photos":l(t=>[a(_,{props:t},{default:l(()=>[o("div",null,[a(h,{src:t.value,"spinner-color":"white",ratio:4/3,style:{"min-width":"150px"}},null,8,["src"])])]),_:2},1032,["props"])]),"body-cell-edit":l(t=>[a(_,{props:t},{default:l(()=>[a(f,{round:"",flat:"",color:"primary",icon:"edit",to:"/admin/jobs/"+t.row._id},null,8,["to"])]),_:2},1032,["props"])]),loading:l(()=>[a(B,{showing:"",color:"primary"})]),item:l(t=>[o("div",I,[a($,null,{default:l(()=>[a(c,{class:"text-center"},{default:l(()=>[o("a",{href:"#/jobs/"+t.row._id},[a(h,{src:t.row.photos[0],"spinner-color":"white",ratio:4/3,style:{"min-width":"150px"}},null,8,["src"])],8,J)]),_:2},1024),a(b,{inset:""}),a(c,{class:"q-pb-none"},{default:l(()=>[o("div",L,[o("div",M,[o("a",{class:"text-h5",href:"#/jobs/"+t.row._id},s(t.row.title),9,T)]),o("div",V,[o("p",A,s(e.$t("job_time")),1),o("p",null,s(t.row.date_from+"~"+t.row.date_to),1)]),o("div",E,[o("p",R,s(e.$t("job_location")),1),o("p",null,s(t.row.city+t.row.district),1)])])]),_:2},1024),a(c,null,{default:l(()=>[a(f,{class:"full-width",outline:"",color:"primary",label:e.$t("edit"),icon:"edit",to:"/admin/jobs/"+t.row._id},null,8,["label","to"])]),_:2},1024)]),_:2},1024)])]),_:1},8,["rows","columns","loading","grid","hide-bottom","filter","no-data-label","no-results-label"])])]))}};export{G as default};
