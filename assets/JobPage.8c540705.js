import{T as h,aJ as x,r as p,j as q,y as v,k as c,W as f,p as s,Q,aK as $,a4 as S,t as a,X as l,n as o,x as _,aH as g,aP as w,m as k,aL as T,F as B,aM as y,aR as D,aN as u,$ as L}from"./index.3e86a9d0.js";import{Q as m,a as J,b as N,c as C,d as I}from"./QTable.ee467b0c.js";import"./QSelect.499c0e23.js";import"./QChip.d5ecf9c3.js";const M={class:"q-pa-xl q-mx-auto",style:{"max-width":"1200px"}},P={class:"row"},V={class:"col-12"},A={class:"text-center q-mb-none"},E={class:"row justify-end"},F={class:"col-2 q-pb-sm text-right"},R={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},H=["href"],K={style:{height:"160px"}},W={class:"q-pb-md"},X=["href"],z={class:"q-pb-xs"},G={class:"text-h6 text-primary"},O={class:"q-pb-xs"},U={class:"text-h6 text-primary"},se={__name:"JobPage",setup(Y){h({useScope:"global"});const{t:i}=h();x(),p("isShown");const n=p(!1),d=q([]),j=v(()=>[{name:"photos",label:"",align:"center",field:e=>e.photos[0]},{name:"title",required:!0,label:i("job_title"),align:"center",field:e=>e.title,format:e=>`${e}`,sortable:!0},{name:"job_time",align:"center",label:i("job_time"),field:e=>e.date_from+"~"+e.date_to,sortable:!0},{name:"place",align:"center",label:i("job_location"),field:e=>e.city+e.district},{name:"edit",align:"center",label:i("edit")}]);return(async()=>{n.value=!0;try{const{data:e}=await $.get("/jobs/my_job");d.push(...e.result),d.map(r=>(r.date_from=new Date(r.date_from).toLocaleDateString(),r.date_to=new Date(r.date_to).toLocaleDateString(),r))}catch(e){console.log(e),S.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError&&e.response.data?e.response.data.message:"\u767C\u751F\u932F\u8AA4!"})}n.value=!1})(),(e,r)=>(c(),f(Q,null,{default:s(()=>[a("div",M,[a("div",P,[a("div",V,[a("h3",A,l(e.$t("manage_jobs")),1)])]),a("div",E,[a("div",F,[o(_,{id:"plus",flat:"",color:"primary",icon:"mdi-plus-circle-outline",label:e.$t("post_jobs"),to:"/admin/jobs_post"},null,8,["label"])])]),o(g,{class:"q-mb-lg"}),o(C,{id:"job_table",rows:d,columns:L(j),"row-key":"name",loading:n.value,grid:e.$q.screen.lt.lg,"hide-bottom":e.$q.screen.lt.lg,filter:e.filter,"no-data-label":e.$t("no_data_label"),"no-results-label":e.$t("no_results_label")},{"body-cell":s(t=>[o(m,{props:t},{default:s(()=>[w(l(t.value),1)]),_:2},1032,["props"])]),header:s(t=>[o(J,{props:t},{default:s(()=>[(c(!0),k(B,null,T(t.cols,b=>(c(),f(I,{key:b.name,props:t,class:"text-primary"},{default:s(()=>[w(l(b.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"body-cell-photos":s(t=>[o(m,{props:t},{default:s(()=>[a("div",null,[o(y,{src:t.value,"spinner-color":"white",ratio:4/3,style:{"min-width":"150px"}},null,8,["src"])])]),_:2},1032,["props"])]),"body-cell-edit":s(t=>[o(m,{props:t},{default:s(()=>[o(_,{round:"",flat:"",color:"primary",icon:"edit",to:"/admin/jobs/"+t.row._id},null,8,["to"])]),_:2},1032,["props"])]),loading:s(()=>[o(N,{showing:"",color:"primary"})]),item:s(t=>[a("div",R,[o(D,null,{default:s(()=>[o(u,{class:"text-center"},{default:s(()=>[a("a",{href:"#/jobs/"+t.row._id},[o(y,{src:t.row.photos[0],"spinner-color":"white",ratio:4/3,style:{"min-width":"150px"}},null,8,["src"])],8,H)]),_:2},1024),o(g,{inset:""}),o(u,{class:"q-pb-none"},{default:s(()=>[a("div",K,[a("div",W,[a("a",{class:"text-h5",href:"#/jobs/"+t.row._id},l(t.row.title),9,X)]),a("div",z,[a("p",G,l(e.$t("job_time")),1),a("p",null,l(t.row.date_from+"~"+t.row.date_to),1)]),a("div",O,[a("p",U,l(e.$t("job_location")),1),a("p",null,l(t.row.city+t.row.district),1)])])]),_:2},1024),o(u,null,{default:s(()=>[o(_,{class:"full-width",outline:"",color:"primary",label:e.$t("edit"),icon:"edit",to:"/admin/jobs/"+t.row._id},null,8,["label","to"])]),_:2},1024)]),_:2},1024)])]),_:1},8,["rows","columns","loading","grid","hide-bottom","filter","no-data-label","no-results-label"])])]),_:1}))}};export{se as default};
