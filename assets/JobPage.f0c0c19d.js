import{Q as g,a as H}from"./QBreadcrumbs.7dece76b.js";import{T as V,aO as P,U as F,u as J,s as K,j as $,r as m,k as d,W as h,p as a,Q as N,aP as C,a3 as v,t as r,n as s,aS as n,b0 as R,m as S,aQ as j,F as x,X as i,aU as f,aV as q,x as w,a0 as D,aW as B,Z as I,b1 as W,A as L,av as O,b2 as X,a1 as U}from"./index.3a460cf9.js";import{Q as Z}from"./QChip.21255316.js";import{Q as G}from"./QForm.39b906b7.js";const Y={class:"q-mx-auto container"},ee={class:"row q-pb-md"},te={class:"row q-pb-xl"},se={class:"col-12"},ae=["innerHTML"],le={class:"text-h6"},be={__name:"JobPage",setup(oe){V({useScope:"global"});const{t:y}=V(),z=P(),A=F(),M=J(),{description:re,role:ie,isHost:ne,isHelper:ue,isLogin:T,lang:de}=K(M),t=$({_id:"",host:"",title:"",city:"",district:"",address:"",zipcode:"",date_from:"",date_to:"",description:"",photos:[],welfare:[],week_hours:"",published_time:"",is_shown:"",question:""}),p=$({job:"",answer:""}),_=m(!0),Q=m(0),b=m(!1),u=m(!1),E=()=>{T.value?u.value=!0:A.push("/login")},k=async()=>{b.value=!0,u.value=!1;try{p.job=t._id,await C.post("/orders",p),v.fire({icon:"success",title:y("apply")+y("success"),text:"\u53EF\u81F3\u6703\u54E1\u4E2D\u5FC3\u67E5\u770B\u5831\u540D\u8CC7\u8A0A"})}catch(e){console.log(e),v.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError&&e.response.data?e.response.data.message:"\u767C\u751F\u932F\u8AA4!"})}b.value=!1};return(async()=>{try{const{data:e}=await C.get("/jobs/"+z.params.id);t._id=e.result._id,t.host=e.result.host,t.title=e.result.title,t.city=e.result.city,t.district=e.result.district,t.address=e.result.address,t.zipcode=e.result.zipcode,t.date_from=new Date(e.result.date_from).toLocaleDateString(),t.date_to=new Date(e.result.date_to).toLocaleDateString(),t.description=e.result.description,t.photos=e.result.photos,t.welfare=e.result.welfare,t.week_hours=e.result.week_hours,t.published_time=e.result.published_time,t.question=e.result.question,t.is_shown=e.result.is_shown}catch(e){console.log(e),v.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError&&e.response.data?e.response.data.message:"\u767C\u751F\u932F\u8AA4!"})}})(),(e,l)=>(d(),h(N,{class:"q-my-lg"},{default:a(()=>[r("div",Y,[r("div",ee,[s(H,{class:"col-12"},{default:a(()=>[s(g,{exact:"",label:e.$t("home"),to:"/"},null,8,["label"]),s(g,{exact:"",label:e.$t("find_jobs"),to:"/jobs"},null,8,["label"]),s(g,{exact:"",label:t.title},null,8,["label"])]),_:1})]),r("div",te,[r("div",se,[s(B,{flat:"",bordered:""},{default:a(()=>[s(n,null,{default:a(()=>[s(R,{thumbnails:"",animated:"",modelValue:Q.value,"onUpdate:modelValue":l[0]||(l[0]=o=>Q.value=o),arrows:"",infinite:"",autoplay:_.value,"transition-prev":"slide-right","transition-next":"slide-left",onMouseenter:l[1]||(l[1]=o=>_.value=!1),onMouseleave:l[2]||(l[2]=o=>_.value=!0)},{default:a(()=>[(d(!0),S(x,null,j(t.photos,(o,c)=>(d(),h(X,{key:c,name:c,"img-src":o},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue","autoplay"])]),_:1}),s(n,null,{default:a(()=>[r("h3",null,i(t.title),1),(d(!0),S(x,null,j(t.welfare,(o,c)=>(d(),h(Z,{key:c,size:".8rem"},{default:a(()=>[f(i(e.$t(o)),1)]),_:2},1024))),128))]),_:1}),s(n,null,{default:a(()=>[r("h5",null,i(e.$t("job_time")),1),f(" "+i(t.date_from+" ~ "+t.date_to)+" ",1),r("h5",null,i(e.$t("job_week_hours")),1),f(" "+i(t.week_hours),1)]),_:1}),s(n,null,{default:a(()=>[r("h5",null,i(e.$t("job_description")),1),r("div",{innerHTML:t.description},null,8,ae)]),_:1}),s(q,{align:"center"},{default:a(()=>[s(w,{padding:"sm lg",size:"1rem",color:"primary",onClick:D(E,["prevent"])},{default:a(()=>[f(i(e.$t("apply")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})])]),s(O,{modelValue:u.value,"onUpdate:modelValue":l[5]||(l[5]=o=>u.value=o),persistent:""},{default:a(()=>[r("div",null,[s(G,{onSubmit:D(k,["prevent"])},{default:a(()=>[s(B,{style:{"min-width":"350px"}},{default:a(()=>[s(n,null,{default:a(()=>[r("div",le,i(t.question),1)]),_:1}),s(n,{class:"q-pt-none"},{default:a(()=>[s(I,{modelValue:p.answer,"onUpdate:modelValue":l[3]||(l[3]=o=>p.answer=o),autofocus:"",onKeyup:W(k,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),s(q,{align:"right",class:"text-primary"},{default:a(()=>[L(s(w,{padding:"sm lg",flat:"",label:e.$t("cancel"),onClick:l[4]||(l[4]=o=>u.value=!1)},null,8,["label"]),[[U]]),L(s(w,{padding:"sm lg",color:"primary",label:e.$t("apply"),type:"submit",loading:b.value},null,8,["label","loading"]),[[U]])]),_:1})]),_:1})]),_:1},8,["onSubmit"])])]),_:1},8,["modelValue"])])]),_:1}))}};export{be as default};
