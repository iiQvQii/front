import{n as m,be as w,bf as P,bg as Q,x as T,q,B as S,E as x,D,G as j,H as V,I as k,p as y,M as C,v as I,N as b,aJ as B,r as f,a as E,o as N,d as J,f as _,e as a,w as s,aP as L,aK as $,_ as M,bh as A,i as g,aI as U,W as z,aN as G,T as H}from"./index.fa303fc3.js";import{Q as K,a as p,b as R}from"./QTable.83e45028.js";import{Q as W}from"./QImg.dfc659b4.js";import"./QSelect.40ba4c1b.js";import"./QChip.380e3246.js";var h=m({name:"QTab",props:w,emits:P,setup(i,{slots:l,emit:n}){const{renderTab:r}=Q(i,l,n);return()=>r("div")}}),v=m({name:"QTabPanel",props:T,setup(i,{slots:l}){return()=>q("div",{class:"q-tab-panel"},S(l.default))}}),F=m({name:"QTabPanels",props:{...x,...D},emits:j,setup(i,{slots:l}){const n=I(),r=V(i,n.proxy.$q),{updatePanelsList:u,getPanelContent:d,panelDirectives:c}=k(),e=y(()=>"q-tab-panels q-panel-parent"+(r.value===!0?" q-tab-panels--dark q-dark":""));return()=>(u(l),C("div",{class:e.value},d(),"pan",i.swipeable,()=>c.value))}});const O={class:"q-pa-md"},X={class:"q-gutter-y-md",style:{"max-width":"1200px"}},se={__name:"JobPage",setup(i){b({useScope:"global"});const{t:l}=b();B();const n=f("isShown"),r=f(!1),u=E([]),d=y(()=>[{name:"photos",label:"",align:"center",field:e=>e.photos[0]},{name:"title",required:!0,label:l("job_title"),align:"center",field:e=>e.title,format:e=>`${e}`,sortable:!0},{name:"job_time",align:"center",label:l("job_time"),field:e=>e.date_from+"~"+e.date_to,sortable:!0},{name:"place",align:"center",label:l("job_place"),field:e=>e.city+e.district},{name:"edit",align:"center",label:l("edit")}]);return(async()=>{r.value=!0;try{const{data:e}=await $.get("/jobs/my_job");u.push(...e.result),u.map(o=>(o.date_from=new Date(o.date_from).toLocaleDateString(),o.date_to=new Date(o.date_to).toLocaleDateString(),o))}catch(e){console.log(e),M.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError&&e.response.data?e.response.data.message:"\u767C\u751F\u932F\u8AA4!"})}r.value=!1})(),(e,o)=>(N(),J("div",O,[_("div",X,[a(L,null,{default:s(()=>[a(A,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=t=>n.value=t),class:"text-grey q-pa-sm","active-color":"primary","indicator-color":"primary","narrow-indicator":"",align:"left"},{default:s(()=>[a(h,{name:"isShown",label:e.$t("is_shown")},null,8,["label"]),a(h,{name:"notShown",label:e.$t("is_not_shown")},null,8,["label"]),a(g,{class:"absolute q-ma-lg",flat:"",round:"",color:"primary",icon:"mdi-plus-circle-outline",style:{right:"0"},size:"1rem",to:"/admin/jobs_post"})]),_:1},8,["modelValue"]),a(U),a(F,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=t=>n.value=t),animated:""},{default:s(()=>[a(v,{name:"isShown"},{default:s(()=>[a(K,{rows:u,columns:z(d),"row-key":"name",loading:r.value,flat:""},{"body-cell":s(t=>[a(p,{props:t},{default:s(()=>[G(H(t.value),1)]),_:2},1032,["props"])]),"body-cell-photos":s(t=>[a(p,{props:t},{default:s(()=>[_("div",null,[a(W,{src:t.value,"spinner-color":"white",style:{height:"140px","min-width":"150px"}},null,8,["src"])])]),_:2},1032,["props"])]),"body-cell-edit":s(t=>[a(p,{props:t},{default:s(()=>[a(g,{round:"",flat:"",color:"primary",icon:"edit",to:"/admin/jobs/"+t.row._id},null,8,["to"])]),_:2},1032,["props"])]),loading:s(()=>[a(R,{showing:"",color:"primary"})]),_:1},8,["rows","columns","loading"])]),_:1}),a(v,{name:"notShown"})]),_:1},8,["modelValue"])]),_:1})])]))}};export{se as default};
